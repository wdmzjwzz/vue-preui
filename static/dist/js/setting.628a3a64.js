(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["setting"],{"1fd9":function(t,e,a){"use strict";var l=a("848c"),s=a.n(l);s.a},"20e0":function(t,e,a){},"848c":function(t,e,a){},d12a:function(t,e,a){"use strict";var l=a("20e0"),s=a.n(l);s.a},f2ea:function(t,e,a){"use strict";a.r(e);var l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"setting bgfff"},[a("h2",{staticClass:"title"},[t._v("通用配置")]),a("div",{staticClass:"setting-content"},[a("el-form",{ref:"form",attrs:{model:t.form}},[a("el-form-item",{staticClass:"parent-label",attrs:{label:"设备认证设置"}},[a("span",[a("el-radio",{attrs:{label:"auto"},model:{value:t.form.deviceSet,callback:function(e){t.$set(t.form,"deviceSet",e)},expression:"form.deviceSet"}},[t._v("自动通过")]),a("el-radio",{attrs:{label:"manual"},model:{value:t.form.deviceSet,callback:function(e){t.$set(t.form,"deviceSet",e)},expression:"form.deviceSet"}},[t._v("手动操作")])],1)]),a("el-form-item",{staticClass:"parent-label",attrs:{label:"输入设置"}},[a("el-row",{staticClass:"sub-title"},[t._v("数据库设置")]),a("el-row",[a("el-form",{ref:"DBsetForm",attrs:{model:t.DBset,"label-position":"left","label-width":"100px"}},[a("el-form-item",{attrs:{label:"数据库类型："}},[a("el-select",{attrs:{placeholder:"请选择数据库类型"},on:{change:t.selectDBtype},model:{value:t.DBset.DBtype.value,callback:function(e){t.$set(t.DBset.DBtype,"value",e)},expression:"DBset.DBtype.value"}},t._l(t.DBset.DBtype.options,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),a("el-form-item",{staticClass:"DBadress",attrs:{label:"数据库IP端口："}},[a("el-input",{attrs:{placeholder:"IP address"},model:{value:t.DBset.host,callback:function(e){t.$set(t.DBset,"host",e)},expression:"DBset.host"}}),a("el-input",{attrs:{placeholder:"port"},model:{value:t.DBset.port,callback:function(e){t.$set(t.DBset,"port",e)},expression:"DBset.port"}})],1),a("el-form-item",{attrs:{label:"数据库用户名："}},[a("el-input",{attrs:{placeholder:"请输入用户名",autocomplete:"new-password"},model:{value:t.DBset.username,callback:function(e){t.$set(t.DBset,"username",e)},expression:"DBset.username"}})],1),a("el-form-item",{attrs:{label:"数据库密码："}},[a("el-input",{attrs:{placeholder:"请输入密码",autocomplete:"new-password",type:"password"},model:{value:t.DBset.password,callback:function(e){t.$set(t.DBset,"password",e)},expression:"DBset.password"}})],1),a("el-form-item",{attrs:{label:"库名："}},[a("el-input",{attrs:{placeholder:"请输入"},model:{value:t.DBset.databaseName,callback:function(e){t.$set(t.DBset,"databaseName",e)},expression:"DBset.databaseName"}})],1),a("el-form-item",{attrs:{label:"表名："}},[a("el-input",{attrs:{placeholder:"请输入"},model:{value:t.DBset.tableName,callback:function(e){t.$set(t.DBset,"tableName",e)},expression:"DBset.tableName"}})],1),a("el-form-item",{attrs:{label:"编码类型："}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.DBset.charset.value,callback:function(e){t.$set(t.DBset.charset,"value",e)},expression:"DBset.charset.value"}},t._l(t.DBset.charset.options,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1)],1)],1),a("el-row",{staticClass:"sub-title"},[t._v("文件设置")]),a("el-row",{attrs:{type:"flex"}},[a("el-col",{attrs:{span:4}},[t._v("文件路径：")]),a("el-col",{attrs:{span:20}},[a("el-input",{attrs:{placeholder:"请输入"},model:{value:t.DBset.filePath,callback:function(e){t.$set(t.DBset,"filePath",e)},expression:"DBset.filePath"}})],1)],1)],1),a("el-form-item",{staticClass:"parent-label",attrs:{label:"输出设置"}},[a("span",[a("el-radio",{attrs:{label:"MYSQL",disabled:!t.DBset.DBtype.value},model:{value:t.form.outputValue,callback:function(e){t.$set(t.form,"outputValue",e)},expression:"form.outputValue"}},[t._v("数据库")]),a("el-radio",{attrs:{label:"FILE"},model:{value:t.form.outputValue,callback:function(e){t.$set(t.form,"outputValue",e)},expression:"form.outputValue"}},[t._v("写入文件")])],1),"FILE"===t.form.outputValue?a("div",{staticClass:"output-path"},[a("span",[t._v("文件路径：")]),a("span",[a("el-input",{model:{value:t.form.outputFilePath,callback:function(e){t.$set(t.form,"outputFilePath",e)},expression:"form.outputFilePath"}})],1)]):t._e()]),a("el-form-item",{staticClass:"parent-label",attrs:{label:"日志设置"}},[a("el-row",{attrs:{type:"flex"}},[a("el-col",{attrs:{span:4}},[t._v("日志级别：")]),a("el-col",{attrs:{span:20}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.form.log.value,callback:function(e){t.$set(t.form.log,"value",e)},expression:"form.log.value"}},t._l(t.form.log.options,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1)],1),a("el-row",{attrs:{type:"flex"}},[a("el-col",{attrs:{span:4}},[t._v("输出位置：")]),a("el-col",{attrs:{span:20}},[a("el-input",{attrs:{placeholder:"请输入"},model:{value:t.form.outputLogPath,callback:function(e){t.$set(t.form,"outputLogPath",e)},expression:"form.outputLogPath"}})],1)],1)],1)],1)],1),a("div",{staticClass:"setting-compute-footor"},[a("el-button",{staticClass:"normal-button",on:{click:function(e){return t.$router.go(-1)}}},[t._v("取消")]),a("el-button",{on:{click:t.postConfig}},[t._v("保存")])],1)])},s=[],o=(a("fe59"),a("08ba"),{data:function(){return{initModel:{},form:{deviceSet:"manual",outputLogPath:"",outputValue:"",outputFilePath:"",log:{value:"ERROR",options:[]}},DBset:{host:"",port:"",username:null,password:null,tableName:null,databaseName:null,filePath:null,DBtype:{value:"",options:[{value:-1,label:"请选择数据库类型"}]},charset:{value:"",options:[]}}}},methods:{selectDBtype:function(t){-1===t&&(this.DBset.DBtype.value="")},getConfig:function(){var t=this;this.ApiService.getConfig().then((function(e){t.initModel=e.data;var a=e.data;t.form.deviceSet=a.authConfig.authType,t.form.log.value=a.logConfig.logLevel,t.form.outputLogPath=a.logConfig.logPath,t.form.outputValue=a.outputConfig.outputFile&&a.outputConfig.outputFile.dataSourceType,t.form.outputFilePath=a.outputConfig.outputFile&&a.outputConfig.outputFile.tableName,t.DBset.filePath=a.inputConfig.inputFile&&a.inputConfig.inputFile.tableName,a.inputConfig.inputDb&&(t.DBset.DBtype.value=a.inputConfig.inputDb.dataSourceType,t.DBset.host=a.inputConfig.inputDb.host,t.DBset.port=a.inputConfig.inputDb.port,t.DBset.tableName=a.inputConfig.inputDb.tableName,t.DBset.username=a.inputConfig.inputDb.username,t.DBset.password=a.inputConfig.inputDb.password,t.DBset.databaseName=a.inputConfig.inputDb.databaseName,t.DBset.charset.value=a.inputConfig.inputDb.charset,t.DBset.filePath=a.inputConfig.inputFile.tableName)}))},postConfig:function(){var t=this,e={authConfig:{authType:this.form.deviceSet},inputConfig:{inputDb:{charset:this.DBset.charset.value,dataSourceType:this.DBset.DBtype.value,databaseName:this.DBset.databaseName,host:this.DBset.host,password:this.DBset.password,port:this.DBset.port,tableName:this.DBset.tableName,username:this.DBset.username},inputFile:{tableName:this.DBset.filePath}},logConfig:{logLevel:this.form.log.value,logPath:this.form.outputLogPath},outputConfig:{outputDb:{},outputFile:{tableName:this.form.outputFilePath}}};try{this.initModel.outputConfig.outputFile.id&&(e.outputConfig.outputFile.id=this.initModel.outputConfig.outputFile.id),this.initModel.inputConfig.inputFile.id&&(e.inputConfig.inputFile.id=this.initModel.inputConfig.inputFile.id)}catch(a){console.log(a)}"MYSQL"===this.form.outputValue?e.outputConfig.outputFile=null:e.outputConfig.outputDb=null,this.form.outputFilePath||(e.outputConfig.outputFile=null),e.inputConfig.inputFile.tableName||(e.inputConfig.inputFile=null),this.DBset.charset.value||this.DBset.DBtype.value||this.DBset.databaseName||this.DBset.host||this.DBset.password||this.DBset.port||this.DBset.tableName||this.DBset.username||(e.inputConfig.inputDb=null),this.DBset.charset.value||this.DBset.DBtype.value||this.DBset.databaseName||this.DBset.host||this.DBset.password||this.DBset.port||this.DBset.tableName||this.DBset.username||this.DBset.filePath||(e.inputConfig=null),this.ApiService.postConfig(e).then((function(e){0===e.code?t.Utils.message("操作成功！","success"):t.Utils.message(e.message||"保存失败！","warning")}))},getOptions:function(){var t=this;this.ApiService.getOptions().then((function(e){e.data.logLevelEnums.forEach((function(e){t.form.log.options.push({value:e,label:e})})),e.data.dataSourceTypeEnums.forEach((function(e){t.DBset.DBtype.options.push({value:e,label:e})})),e.data.charsetEnums.forEach((function(e){t.DBset.charset.options.push({value:e,label:e})}))}))}},mounted:function(){this.getConfig(),this.getOptions()}}),i=o,u=(a("d12a"),a("1fd9"),a("9ca4")),n=Object(u["a"])(i,l,s,!1,null,"2d19b0e2",null);e["default"]=n.exports}}]);
//# sourceMappingURL=setting.628a3a64.js.map