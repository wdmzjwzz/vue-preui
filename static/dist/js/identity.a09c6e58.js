(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["identity"],{"053b":function(t,e,s){var n=s("1e2c"),a=s("d910").f,i=Function.prototype,r=i.toString,l=/^\s*function ([^ (]*)/,u="name";n&&!(u in i)&&a(i,u,{configurable:!0,get:function(){try{return r.call(this).match(l)[1]}catch(t){return""}}})},"0d7a":function(t,e,s){"use strict";var n=s("b2a2"),a=s("8a1c"),i=s("857c"),r=s("2732"),l=s("ef4c"),u=s("38eb"),o=s("d88d"),c=s("59da"),h=s("5139"),d=s("efe2"),p=[].push,f=Math.min,g=4294967295,m=!d((function(){return!RegExp(g,"y")}));n("split",2,(function(t,e,s){var n;return n="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,s){var n=String(r(this)),i=void 0===s?g:s>>>0;if(0===i)return[];if(void 0===t)return[n];if(!a(t))return e.call(n,t,i);var l,u,o,c=[],d=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),f=0,m=new RegExp(t.source,d+"g");while(l=h.call(m,n)){if(u=m.lastIndex,u>f&&(c.push(n.slice(f,l.index)),l.length>1&&l.index<n.length&&p.apply(c,l.slice(1)),o=l[0].length,f=u,c.length>=i))break;m.lastIndex===l.index&&m.lastIndex++}return f===n.length?!o&&m.test("")||c.push(""):c.push(n.slice(f)),c.length>i?c.slice(0,i):c}:"0".split(void 0,0).length?function(t,s){return void 0===t&&0===s?[]:e.call(this,t,s)}:e,[function(e,s){var a=r(this),i=void 0==e?void 0:e[t];return void 0!==i?i.call(e,a,s):n.call(String(a),e,s)},function(t,a){var r=s(n,t,this,a,n!==e);if(r.done)return r.value;var h=i(t),d=String(this),p=l(h,RegExp),v=h.unicode,b=(h.ignoreCase?"i":"")+(h.multiline?"m":"")+(h.unicode?"u":"")+(m?"y":"g"),y=new p(m?h:"^(?:"+h.source+")",b),C=void 0===a?g:a>>>0;if(0===C)return[];if(0===d.length)return null===c(y,d)?[d]:[];var w=0,I=0,S=[];while(I<d.length){y.lastIndex=m?I:0;var x,A=c(y,m?d:d.slice(I));if(null===A||(x=f(o(y.lastIndex+(m?0:I)),d.length))===w)I=u(d,I,v);else{if(S.push(d.slice(w,I)),S.length===C)return S;for(var _=1;_<=A.length-1;_++)if(S.push(A[_]),S.length===C)return S;I=w=x}}return S.push(d.slice(w)),S}]}),!m)},"1c2e":function(t,e,s){"use strict";var n=s("1944"),a=s("857c"),i=s("efe2"),r=s("99ad"),l="toString",u=RegExp.prototype,o=u[l],c=i((function(){return"/a/b"!=o.call({source:"a",flags:"b"})})),h=o.name!=l;(c||h)&&n(RegExp.prototype,l,(function(){var t=a(this),e=String(t.source),s=t.flags,n=String(void 0===s&&t instanceof RegExp&&!("flags"in u)?r.call(t):s);return"/"+e+"/"+n}),{unsafe:!0})},"3ca1":function(t,e,s){"use strict";s.r(e);var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticStyle:{height:"100%"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.showCreateOption,expression:"showCreateOption"}],staticClass:"create-Identity bgfff"},[s("h2",{staticClass:"title"},[t._v("发起认证")]),s("el-form",{ref:"form",attrs:{rules:t.rules,inline:!0,model:t.form}},[s("el-form-item",{attrs:{label:"合作方设备IP地址："}},[s("ipInput",{ref:"ipInput",attrs:{value:t.form.ipAdress},on:{status:t.isIP}})],1),s("el-form-item",{attrs:{label:"合作方设备端口号：",prop:"port"}},[s("el-input",{staticClass:"identify-input",attrs:{placeholder:"请输入port"},model:{value:t.form.port,callback:function(e){t.$set(t.form,"port",t._n(e))},expression:"form.port"}})],1),s("el-form-item",{staticClass:"identify-button-item"},[s("el-button",{staticClass:"identify-button",on:{click:t.identify}},[t._v("确认发起")])],1)],1)],1),s("div",{staticClass:"identity bgfff"},[s("h2",{staticClass:"title"},[t._v("认证管理")]),s("div",{staticClass:"search-options"},[s("span",{staticClass:"status"},[t._v(" 认证状态： "),s("el-select",{attrs:{placeholder:"请选择"},model:{value:t.authStatus.value,callback:function(e){t.$set(t.authStatus,"value",e)},expression:"authStatus.value"}},t._l(t.authStatus.options,(function(t){return s("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),s("span",{staticClass:"company"},[t._v(" 合作方： "),s("el-select",{attrs:{placeholder:"请选择"},model:{value:t.authCompany.value,callback:function(e){t.$set(t.authCompany,"value",e)},expression:"authCompany.value"}},t._l(t.authCompany.options,(function(t){return s("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),s("span",[s("el-button",{staticClass:"short-button",on:{click:function(e){return t.getAuthList()}}},[t._v("查询")]),s("el-button",{staticClass:"normal-button short-button",on:{click:function(e){return t.reset()}}},[t._v("重置")])],1),s("span",{staticClass:"handler"},[s("el-dropdown",{attrs:{placement:"bottom"},on:{command:t.auth}},[s("el-button",{staticClass:"normal-button long-button"},[t._v(" 批量操作 "),s("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),s("el-dropdown-menu",{staticClass:"handler-button",attrs:{slot:"dropdown"},slot:"dropdown"},[s("el-dropdown-item",{attrs:{command:"accepted"}},[t._v("通过")]),s("el-dropdown-item",{attrs:{command:"rejected"}},[t._v("拒绝")])],1)],1),s("el-button",{staticClass:"long-button",on:{click:function(e){t.showCreateOption=!t.showCreateOption}}},[t._v("发起认证")])],1)]),s("el-table",{staticStyle:{width:"100%"},attrs:{"header-row-class-name":"table-header","row-class-name":"table-tr",data:t.tableData,border:"","cell-class-name":t.getClassName,height:"400"},on:{"selection-change":t.handleSelectionChange}},[s("el-table-column",{attrs:{align:"center",type:"selection",width:"55",selectable:t.isSelectable}}),t._l(t.columns,(function(t){return s("el-table-column",{key:t.id,attrs:{align:"center","show-overflow-tooltip":"",prop:t.id,label:t.name}})})),s("el-table-column",{attrs:{label:"操作",align:"center",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",{staticClass:"identify-pass",class:{"identify-disable":!e.row.canOperate||"waiting"!==e.row.status},on:{click:function(s){return t.handlerAuth(e.row.authId,"accepted")}}},[t._v("通过")]),s("span",{staticClass:"identify-reject red",class:{"identify-disable":!e.row.canOperate||"waiting"!==e.row.status},on:{click:function(s){return t.handlerAuth(e.row.authId,"rejected")}}},[t._v("拒绝")])]}}])})],2),s("div",{staticClass:"identity-pagination"},[s("span",[t._v("共"+t._s(t.total)+"条记录")]),s("span",{staticClass:"right-part"},[s("span",{staticStyle:{"margin-right":"10px"}},[t._v("共"+t._s(t.totalPage)+"页")]),s("el-select",{staticClass:"page-size-select",attrs:{placeholder:"请选择"},on:{change:t.handleSizeChange},model:{value:t.pageSizeList.value,callback:function(e){t.$set(t.pageSizeList,"value",e)},expression:"pageSizeList.value"}},t._l(t.pageSizeList.options,(function(t){return s("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1),s("el-pagination",{attrs:{"current-page":t.currentPage,"page-size":t.size,layout:"prev, pager, next",total:t.total},on:{"current-change":t.handleCurrentChange}})],1)])],1)])},a=[],i=(s("fe59"),s("9302"),s("053b"),s("08ba"),function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"input-ip",class:{"error-input":t.isIP},style:{width:"220px"}},[s("ul",{ref:"box"},t._l(t.vHtml,(function(e,n){return s("li",{key:n,class:t.format},[s("input",t._b({class:t.inputRed[n],attrs:{type:"text",maxlength:t.maxlength,readonly:t.readonly},domProps:{value:t.result[n]},on:{keydown:t.keyDown,input:function(e){return t.handleInput(n,e)},focus:function(e){return t.handleFocus(n,e)},blur:function(e){return t.handelBlur(n,e)}}},"input",t.$attrs,!1)),n!==t.vHtml.length-1?s("span",[t._v(t._s(t.splitChar))]):t._e()])})),0),s("transition",{attrs:{name:"v-easy-error"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.isIP,expression:"isIP"}],staticClass:"error inspection"},[t._v(t._s(t.message))])])],1)}),r=[],l=(s("513c"),s("e18c"),s("e35a"),s("1c2e"),s("5e9f"),s("0d7a"),{model:{event:"changeResult"},name:"VEIp",data:function(){return{inputRed:[],currentIndex:0,maxlength:"3",isIP:!1,isString:!1}},props:{spliceChar:{type:String,default:"."},readonly:{type:[Boolean,String],default:!1},message:{type:String,default:"请输入正确的IP地址"},value:[String,Array],format:{type:String,default:"ipv4"}},watch:{isIP:function(t){this.$emit("status",!t)},result:function(t){for(var e=!0,s=0;s<4;s++)"undefined"===typeof t[s]&&(e=!1);e&&t.length>3&&this.$emit("status",this.isIpv4Reg(t.join(".")))}},computed:{result:function(){var t=[];return t=void 0===this.value||null===this.value?[]:this.value,Array.isArray(this.value)||(this.isString=!0,t=t.split(".")),t},splitChar:function(){return"."!==this.spliceChar?this.spliceChar:"ipv4"===this.format?".":":"},vHtml:function(){var t=[];this.maxlength="3";for(var e=0;e<4;e++)t.push("");return t}},methods:{handleInput:function(t,e){this.setCurrentValue(e.target.value,t),this.isIpv4(t),this.result[t]&&this.result[t].length===Number(this.maxlength)&&t<this.vHtml.length-1&&this.$refs.box.getElementsByTagName("input")[t+1].focus(),this.$emit("input",{$event:e,index:t})},isIpv4:function(t){var e=this,s=/[^0-9]|^0+(?!$)/g;this.result[t]=this.result[t]&&this.result[t].replace(s,""),this.result[t]&&this.result[t].length>3&&3===t&&(this.result[t]=this.result[t].substring(4,1)),this.result[t]>255&&!this.isIpv4Reg(this.result.join("."))&&this.result[t]&&0!==this.result[t].toString().length?(this.inputRed[t]="red",this.isIP=!0,this.$emit("error",this.isString?this.result.join("."):this.result)):(this.inputRed[t]="none",this.isIP=!1,this.inputRed.forEach((function(t){"red"===t&&(e.isIP=!0,e.$emit("error",e.isString?e.result.join("."):e.result),e.$emit("error",e.isString?e.result.join("."):e.result))})))},isIpv4Reg:function(t){var e=/^(?:(?:2[0-4][0-9]\.)|(?:25[0-5]\.)|(?:1[0-9][0-9]\.)|(?:[1-9][0-9]\.)|(?:[0-9]\.)){3}(?:(?:2[0-4][0-9])|(?:25[0-5])|(?:1[0-9][0-9])|(?:[1-9][0-9])|(?:[0-9]))$/;return e.test(t)},handleFocus:function(t,e){this.currentIndex=t,this.$emit("focus",{$event:e,index:t})},handelBlur:function(t,e){if(7===t){var s=/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/;s.test(this.result.join(":"))?this.isIP=!1:(this.isIP=!0,this.$emit("error",this.result))}this.$emit("blur",{$event:e,index:t})},keyDown:function(t){8!==t.keyCode||0===this.currentIndex||this.result[this.currentIndex]&&0!==this.result[this.currentIndex].length||this.$refs.box.getElementsByTagName("input")[this.currentIndex-1].focus()},setCurrentValue:function(t,e){t.toString()!==this.result.join(".")&&("undefined"!==typeof e?this.$set(this.result,e,t):this.result=t,this.$emit("changeResult",this.isString?this.result.join("."):this.result))}}}),u=l,o=(s("cc65"),s("9ca4")),c=Object(o["a"])(u,i,r,!1,null,"c01d31b4",null),h=c.exports,d={data:function(){return{isIpvalidate:!1,currentPage:1,total:0,totalPage:0,showCreateOption:!1,tableData:[],multipleSelection:[],columns:[{id:"status_fmt",name:"认证状态"},{id:"oppositeIpPort",name:"设备IP"},{id:"oppositeCompanyCode",name:"设备号"},{id:"senderCompany",name:"发起方"},{id:"receiverCompany",name:"合作方"},{id:"createTime_fmt",name:"发起时间"}],pageSizeList:{value:30,options:[{value:10,label:"每页10条"},{value:30,label:"每页30条"},{value:50,label:"每页50条"}]},authStatus:{value:"",options:[{value:"waiting",label:"等待认证"},{value:"rejected",label:"已拒绝"},{value:"accepted",label:"认证通过"}]},authCompany:{value:"",options:[]},rules:{ip:[{validator:this.Utils.checkIp.bind(this),trigger:["change","blur"]}],port:[{type:"number",message:"请输入正确的端口"}]},form:{ipAdress:[],ip:"",port:""},size:30}},methods:{isIP:function(t){this.isIpvalidate=t},getClassName:function(t){var e=t.row,s=(t.column,t.rowIndex,t.columnIndex);if(1===s)return"accepted"===e.status?"status-accept":"rejected"===e.status?"status-rejected":"status-waiting"},reset:function(){this.authStatus.value="",this.authCompany.value="",this.getAuthList()},isSelectable:function(t,e){return!(!t.canOperate||"waiting"!==t.status)},auth:function(t){var e=[],s=!0;if(0!==this.multipleSelection.length){this.multipleSelection.forEach((function(t){e.push(t.authId),t.canOperate||(s=!1)}));var n=e.join(",");s?this.handlerAuth(n,t):this.Utils.message("无操作权限！","warning")}},handlerAuth:function(t,e){var s=this,n="accepted"===e?"是否通过认证？":"是否拒绝认证？";this.$confirm(n,"认证",{confirmButtonText:"确定",cancelButtonText:"取消",iconClass:"iconfont icon13icon1",cancelButtonClass:"reject-button",customClass:"identity-message"}).then((function(){var n={authId:t,authStatus:e};s.ApiService.postAudit(n).then((function(t){1!==t.code?(s.Utils.message(t.message,"success"),s.getAuthList()):s.Utils.message(t.message,"warning")}),(function(t){s.Utils.message(t.message,"warning")}))})).catch((function(){}))},handleSelectionChange:function(t){this.multipleSelection=t},handleSizeChange:function(t){this.size=t,this.getAuthList({status:this.authStatus.value,company:this.authCompany.value,page:this.currentPage-1,size:t})},handleCurrentChange:function(t){this.currentPage=t,this.getAuthList({status:this.authStatus.value,company:this.authCompany.value,page:this.currentPage-1,size:this.size})},getAuthList:function(t){var e=this,s=t||{status:this.authStatus.value,company:this.authCompany.value,page:this.currentPage-1,size:this.size};this.ApiService.getAuthList(s).then((function(t){t.data.content.forEach((function(t){t.oppositeIpPort=t.oppositeIp+":"+t.oppositePort,"accepted"===t.status&&(t.status_fmt="认证通过"),"rejected"===t.status&&(t.status_fmt="已拒绝"),"waiting"===t.status&&(t.status_fmt="等待认证"),t.createTime_fmt=e.moment(t.createTime).format("YYYY-MM-DD HH:mm:ss")})),e.tableData=t.data.content,e.total=t.data.totalElements,e.totalPage=t.data.totalPages}),(function(t){e.Utils.message(t.message,"warning")}))},identify:function(){var t=this;this.isIpvalidate?this.$refs.form.validate((function(e){if(!e)return!1;t.ApiService.postAuthStart({authIp:t.form.ipAdress.join("."),authPort:t.form.port}).then((function(e){1!==e.code?(t.getAuthList(),t.Utils.message("操作成功！","success"),t.$refs.form.resetFields()):t.Utils.message(e.message,"warning")}),(function(e){t.Utils.message(e.message,"warning")}))})):this.$refs.ipInput.isIP=!0},getCompanyList:function(){var t=this;this.ApiService.getCompanyList().then((function(e){e.data.forEach((function(e){t.authCompany.options.push({value:e.authId,label:e.name})}))}))}},mounted:function(){this.getCompanyList(),this.getAuthList()},components:{ipInput:h}},p=d,f=(s("e5a1"),s("b275"),Object(o["a"])(p,n,a,!1,null,"12df94ce",null));e["default"]=f.exports},"6d19":function(t,e,s){},"76f8":function(t,e,s){},"8a1c":function(t,e,s){var n=s("a719"),a=s("2118"),i=s("90fb"),r=i("match");t.exports=function(t){var e;return n(t)&&(void 0!==(e=t[r])?!!e:"RegExp"==a(t))}},b275:function(t,e,s){"use strict";var n=s("76f8"),a=s.n(n);a.a},cc65:function(t,e,s){"use strict";var n=s("6d19"),a=s.n(n);a.a},d7d5:function(t,e,s){},e5a1:function(t,e,s){"use strict";var n=s("d7d5"),a=s.n(n);a.a}}]);
//# sourceMappingURL=identity.a09c6e58.js.map