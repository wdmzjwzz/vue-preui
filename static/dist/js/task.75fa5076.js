(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["task"],{"053b":function(t,e,n){var a=n("1e2c"),i=n("d910").f,r=Function.prototype,s=r.toString,o=/^\s*function ([^ (]*)/,l="name";a&&!(l in r)&&i(r,l,{configurable:!0,get:function(){try{return s.call(this).match(o)[1]}catch(t){return""}}})},"0778":function(t,e,n){"use strict";var a=n("61e7"),i=n.n(a);i.a},"0a51":function(t,e,n){"use strict";var a=n("1c8b"),i=n("1e2c"),r=n("d890"),s=n("faa8"),o=n("a719"),l=n("d910").f,c=n("c69d"),u=r.Symbol;if(i&&"function"==typeof u&&(!("description"in u.prototype)||void 0!==u().description)){var f={},p=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),e=this instanceof p?new u(t):void 0===t?u():u(t);return""===t&&(f[e]=!0),e};c(p,u);var d=p.prototype=u.prototype;d.constructor=p;var h=d.toString,m="Symbol(test)"==String(u("test")),v=/^Symbol\((.*)\)[^)]+$/;l(d,"description",{configurable:!0,get:function(){var t=o(this)?this.valueOf():this,e=h.call(t);if(s(f,t))return"";var n=m?e.slice(7,-1):e.replace(v,"$1");return""===n?void 0:n}}),a({global:!0,forced:!0},{Symbol:p})}},"0d7a":function(t,e,n){"use strict";var a=n("b2a2"),i=n("8a1c"),r=n("857c"),s=n("2732"),o=n("ef4c"),l=n("38eb"),c=n("d88d"),u=n("59da"),f=n("5139"),p=n("efe2"),d=[].push,h=Math.min,m=4294967295,v=!p((function(){return!RegExp(m,"y")}));a("split",2,(function(t,e,n){var a;return a="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,n){var a=String(s(this)),r=void 0===n?m:n>>>0;if(0===r)return[];if(void 0===t)return[a];if(!i(t))return e.call(a,t,r);var o,l,c,u=[],p=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),h=0,v=new RegExp(t.source,p+"g");while(o=f.call(v,a)){if(l=v.lastIndex,l>h&&(u.push(a.slice(h,o.index)),o.length>1&&o.index<a.length&&d.apply(u,o.slice(1)),c=o[0].length,h=l,u.length>=r))break;v.lastIndex===o.index&&v.lastIndex++}return h===a.length?!c&&v.test("")||u.push(""):u.push(a.slice(h)),u.length>r?u.slice(0,r):u}:"0".split(void 0,0).length?function(t,n){return void 0===t&&0===n?[]:e.call(this,t,n)}:e,[function(e,n){var i=s(this),r=void 0==e?void 0:e[t];return void 0!==r?r.call(e,i,n):a.call(String(i),e,n)},function(t,i){var s=n(a,t,this,i,a!==e);if(s.done)return s.value;var f=r(t),p=String(this),d=o(f,RegExp),g=f.unicode,b=(f.ignoreCase?"i":"")+(f.multiline?"m":"")+(f.unicode?"u":"")+(v?"y":"g"),y=new d(v?f:"^(?:"+f.source+")",b),w=void 0===i?m:i>>>0;if(0===w)return[];if(0===p.length)return null===u(y,p)?[p]:[];var _=0,C=0,S=[];while(C<p.length){y.lastIndex=v?C:0;var k,x=u(y,v?p:p.slice(C));if(null===x||(k=h(c(y.lastIndex+(v?0:C)),p.length))===_)C=l(p,C,g);else{if(S.push(p.slice(_,C)),S.length===w)return S;for(var L=1;L<=x.length-1;L++)if(S.push(x[L]),S.length===w)return S;C=_=k}}return S.push(p.slice(_)),S}]}),!v)},"1c2e":function(t,e,n){"use strict";var a=n("1944"),i=n("857c"),r=n("efe2"),s=n("99ad"),o="toString",l=RegExp.prototype,c=l[o],u=r((function(){return"/a/b"!=c.call({source:"a",flags:"b"})})),f=c.name!=o;(u||f)&&a(RegExp.prototype,o,(function(){var t=i(this),e=String(t.source),n=t.flags,a=String(void 0===n&&t instanceof RegExp&&!("flags"in l)?s.call(t):n);return"/"+e+"/"+a}),{unsafe:!0})},"27e4":function(t,e,n){"use strict";var a=n("9c06"),i=n.n(a);i.a},"32f1":function(t,e,n){"use strict";var a=n("ffa4"),i=n.n(a);i.a},4350:function(t,e,n){var a=n("90fb");e.f=a},"61e7":function(t,e,n){},"6a61":function(t,e,n){var a=function(t){"use strict";var e,n=Object.prototype,a=n.hasOwnProperty,i="function"===typeof Symbol?Symbol:{},r=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",o=i.toStringTag||"@@toStringTag";function l(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(Y){l=function(t,e,n){return t[e]=n}}function c(t,e,n,a){var i=e&&e.prototype instanceof v?e:v,r=Object.create(i.prototype),s=new D(a||[]);return r._invoke=x(t,n,s),r}function u(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(Y){return{type:"throw",arg:Y}}}t.wrap=c;var f="suspendedStart",p="suspendedYield",d="executing",h="completed",m={};function v(){}function g(){}function b(){}var y={};y[r]=function(){return this};var w=Object.getPrototypeOf,_=w&&w(w(O([])));_&&_!==n&&a.call(_,r)&&(y=_);var C=b.prototype=v.prototype=Object.create(y);function S(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function k(t,e){function n(i,r,s,o){var l=u(t[i],t,r);if("throw"!==l.type){var c=l.arg,f=c.value;return f&&"object"===typeof f&&a.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,s,o)}),(function(t){n("throw",t,s,o)})):e.resolve(f).then((function(t){c.value=t,s(c)}),(function(t){return n("throw",t,s,o)}))}o(l.arg)}var i;function r(t,a){function r(){return new e((function(e,i){n(t,a,e,i)}))}return i=i?i.then(r,r):r()}this._invoke=r}function x(t,e,n){var a=f;return function(i,r){if(a===d)throw new Error("Generator is already running");if(a===h){if("throw"===i)throw r;return j()}n.method=i,n.arg=r;while(1){var s=n.delegate;if(s){var o=L(s,n);if(o){if(o===m)continue;return o}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(a===f)throw a=h,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a=d;var l=u(t,e,n);if("normal"===l.type){if(a=n.done?h:p,l.arg===m)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(a=h,n.method="throw",n.arg=l.arg)}}}function L(t,n){var a=t.iterator[n.method];if(a===e){if(n.delegate=null,"throw"===n.method){if(t.iterator["return"]&&(n.method="return",n.arg=e,L(t,n),"throw"===n.method))return m;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return m}var i=u(a,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,m;var r=i.arg;return r?r.done?(n[t.resultName]=r.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,m):r:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,m)}function T(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function E(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function D(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(T,this),this.reset(!0)}function O(t){if(t){var n=t[r];if(n)return n.call(t);if("function"===typeof t.next)return t;if(!isNaN(t.length)){var i=-1,s=function n(){while(++i<t.length)if(a.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return s.next=s}}return{next:j}}function j(){return{value:e,done:!0}}return g.prototype=C.constructor=b,b.constructor=g,g.displayName=l(b,o,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"===typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,l(t,o,"GeneratorFunction")),t.prototype=Object.create(C),t},t.awrap=function(t){return{__await:t}},S(k.prototype),k.prototype[s]=function(){return this},t.AsyncIterator=k,t.async=function(e,n,a,i,r){void 0===r&&(r=Promise);var s=new k(c(e,n,a,i),r);return t.isGeneratorFunction(n)?s:s.next().then((function(t){return t.done?t.value:s.next()}))},S(C),l(C,o,"Generator"),C[r]=function(){return this},C.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){while(e.length){var a=e.pop();if(a in t)return n.value=a,n.done=!1,n}return n.done=!0,n}},t.values=O,D.prototype={constructor:D,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(E),!t)for(var n in this)"t"===n.charAt(0)&&a.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0],e=t.completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(a,i){return o.type="throw",o.arg=t,n.next=a,i&&(n.method="next",n.arg=e),!!i}for(var r=this.tryEntries.length-1;r>=0;--r){var s=this.tryEntries[r],o=s.completion;if("root"===s.tryLoc)return i("end");if(s.tryLoc<=this.prev){var l=a.call(s,"catchLoc"),c=a.call(s,"finallyLoc");if(l&&c){if(this.prev<s.catchLoc)return i(s.catchLoc,!0);if(this.prev<s.finallyLoc)return i(s.finallyLoc)}else if(l){if(this.prev<s.catchLoc)return i(s.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return i(s.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&a.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var r=i;break}}r&&("break"===t||"continue"===t)&&r.tryLoc<=e&&e<=r.finallyLoc&&(r=null);var s=r?r.completion:{};return s.type=t,s.arg=e,r?(this.method="next",this.next=r.finallyLoc,m):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),E(n),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var a=n.completion;if("throw"===a.type){var i=a.arg;E(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,a){return this.delegate={iterator:O(t),resultName:n,nextLoc:a},"next"===this.method&&(this.arg=e),m}},t}(t.exports);try{regeneratorRuntime=a}catch(i){Function("r","regeneratorRuntime = r")(a)}},"6d51":function(t,e,n){var a=n("1b99"),i=n("faa8"),r=n("4350"),s=n("d910").f;t.exports=function(t){var e=a.Symbol||(a.Symbol={});i(e,t)||s(e,t,{value:r.f(t)})}},7541:function(t,e,n){"use strict";var a=n("b3ab"),i=n.n(a);i.a},"77ad":function(t,e,n){"use strict";var a=n("1c8b"),i=n("a719"),r=n("74e7"),s=n("e1d6"),o=n("d88d"),l=n("da10"),c=n("1bbd"),u=n("90fb"),f=n("1ea7"),p=n("ff9c"),d=f("slice"),h=p("slice",{ACCESSORS:!0,0:0,1:2}),m=u("species"),v=[].slice,g=Math.max;a({target:"Array",proto:!0,forced:!d||!h},{slice:function(t,e){var n,a,u,f=l(this),p=o(f.length),d=s(t,p),h=s(void 0===e?p:e,p);if(r(f)&&(n=f.constructor,"function"!=typeof n||n!==Array&&!r(n.prototype)?i(n)&&(n=n[m],null===n&&(n=void 0)):n=void 0,n===Array||void 0===n))return v.call(f,d,h);for(a=new(void 0===n?Array:n)(g(h-d,0)),u=0;d<h;d++,u++)d in f&&c(a,u,f[d]);return a.length=u,a}})},"8a1c":function(t,e,n){var a=n("a719"),i=n("2118"),r=n("90fb"),s=r("match");t.exports=function(t){var e;return a(t)&&(void 0!==(e=t[s])?!!e:"RegExp"==i(t))}},"987f":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"task-detail bgfff"},[n("h2",{staticClass:"title"},[n("i",{staticClass:"iconfont icon6icon1",on:{click:function(e){return t.$router.go(-1)}}}),t._v(" 任务详情 ")]),n("div",[n("el-steps",{staticClass:"detail_steps",attrs:{active:t.stepModel.active,"align-center":"","finish-status":"success"}},[n("el-step",{attrs:{title:t.stepModel.step1.title,description:t.stepModel.step1.description}}),n("el-step",{attrs:{title:t.stepModel.step2.title,description:t.stepModel.step2.description}}),n("el-step",{attrs:{title:t.stepModel.step3.title,description:t.stepModel.step3.description}}),n("el-step",{staticClass:"step4",attrs:{title:t.stepModel.step4.title,description:t.stepModel.step4.description}})],1),n("div",{staticClass:"middle-part"},[n("div",[n("div",{staticClass:"middle-title"},[t._v("计算参与方")]),n("div",{staticClass:"middle-content"},[n("span",[t._v(" "+t._s(t.model.serverName)+" "),n("span",[t._v(t._s(t.model.status_fmt))])]),n("span",[t._v(" "+t._s(t.model.clientName)+" "),n("span",[t._v(t._s(t.model.status_fmt))])])])]),n("div",[n("div",{staticClass:"middle-title"},[t._v("计算耗时")]),n("div",{staticClass:"spend-time"},[n("i",{staticClass:"iconfont icon8icon3"}),n("h1",[t._v("已耗时")]),n("div",{staticClass:"show-time"},[n("span",{staticClass:"timeNum"},[t._v(t._s(t.getTimeElement.h))]),n("span",[t._v("h")]),n("span",{staticClass:"timeNum"},[t._v(t._s(t.getTimeElement.m))]),n("span",[t._v("m")]),n("span",{staticClass:"timeNum"},[t._v(t._s(t.getTimeElement.s))]),n("span",[t._v("s")])])])])]),n("div",{staticClass:"bottom-part"},[n("div",[n("div",[n("span",[t._v("发起方")]),n("span",[t._v(t._s(t.model.clientName))])]),n("div",[n("span",[t._v("合作方")]),n("span",[t._v(t._s(t.model.serverName))])]),n("div",[n("span",[t._v("结果保存方")]),n("span",[t._v(t._s(t.model.clientName))])]),n("div",[n("span",[t._v("查询字段")]),n("span",[t._v(t._s(t.model.selectedLabels))])])]),n("div",[n("div",[n("span",[t._v("查询条数/参与计算总量")]),n("span",[t._v(t._s(t.model.receiverCount+"/"+(t.model.senderCount||"--")))])]),n("div",[n("span",[t._v("查询率")]),n("span",[t._v(t._s(t.model.resultCount&&Number(t.model.resultCount/t.model.receiverCount*100).toFixed(2)+"%"||"--"))])]),n("div",[n("span",[t._v("查询耗时")]),n("span",{staticClass:"show-time"},[n("span",{staticClass:"timeNum"},[t._v(t._s(t.getTimeElement.h))]),n("span",[t._v("h")]),n("span",{staticClass:"timeNum"},[t._v(t._s(t.getTimeElement.m))]),n("span",[t._v("m")]),n("span",{staticClass:"timeNum"},[t._v(t._s(t.getTimeElement.s))]),n("span",[t._v("s")])])]),n("div",[n("span",[t._v("查询结果文件/查询结果表名")]),n("span",[t._v(t._s(t.model.resultFile||"--"))])])])])],1)])},i=[],r=(n("513c"),{data:function(){return{model:{}}},computed:{stepModel:function(){switch(this.model.status){case"accepted":return{active:3,step1:{title:"发起计算",description:this.moment(this.model.createTime).format("YYYY-MM-DD HH:mm:ss")},step2:{title:"申请同意",description:this.model.acceptTime&&this.moment(this.model.acceptTime).format("YYYY-MM-DD HH:mm:ss")},step3:{title:"开始计算",description:this.model.initTime&&this.moment(this.model.initTime).format("YYYY-MM-DD HH:mm:ss")},step4:{title:"计算中",description:""}};case"waiting":return{active:1,step1:{title:"发起计算",description:this.moment(this.model.createTime).format("YYYY-MM-DD HH:mm:ss")},step2:{title:"申请同意",description:""},step3:{title:"计算开始",description:""},step4:{title:"计算中",description:""}};case"finished":return{active:4,step1:{title:"发起计算",description:this.moment(this.model.createTime).format("YYYY-MM-DD HH:mm:ss")},step2:{title:"申请同意",description:this.model.acceptTime&&this.moment(this.model.acceptTime).format("YYYY-MM-DD HH:mm:ss")},step3:{title:"开始计算",description:this.model.initTime&&this.moment(this.model.initTime).format("YYYY-MM-DD HH:mm:ss")},step4:{title:"计算完成",description:this.model.finishedTime&&this.moment(this.model.finishedTime).format("YYYY-MM-DD HH:mm:ss")}};default:return{step1:{},step2:{},step3:{},step4:{}}}},getTimeElement:function(){var t;if(t=this.model.finishedTime?this.model.finishedTime:(new Date).getTime(),!this.model.initTime)return{h:0,m:0,s:0};var e=(t-this.model.initTime)/1e3||0,n=Math.floor(Number(e)/3600),a=Math.floor((Number(e)-3600*n)/60),i=Math.ceil(Number(e)%60);return{h:n,m:a,s:i}}},methods:{getDetail:function(){var t=this,e=this.$route.params.taskId;e&&this.ApiService.getTaskDetail({taskId:e}).then((function(e){"accepted"===e.data.status&&(e.data.status_fmt="计算中"),"waiting"===e.data.status&&(e.data.status_fmt="等待加入"),"finished"===e.data.status&&(e.data.status_fmt="已完成"),"rejected"===e.data.status&&(e.data.status_fmt="已拒绝"),t.model=e.data}))}},mounted:function(){this.getDetail()},destroyed:function(){}}),s=r,o=(n("32f1"),n("0778"),n("9ca4")),l=Object(o["a"])(s,a,i,!1,null,"1ef1a432",null);e["default"]=l.exports},"9b11":function(t,e,n){var a=n("6d51");a("iterator")},"9c06":function(t,e,n){},b3ab:function(t,e,n){},c051:function(t,e,n){var a=n("da10"),i=n("b338").f,r={}.toString,s="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],o=function(t){try{return i(t)}catch(e){return s.slice()}};t.exports.f=function(t){return s&&"[object Window]"==r.call(t)?o(t):i(a(t))}},c09b:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"identity bgfff"},[n("h2",{staticClass:"title"},[t._v("任务管理")]),n("div",{staticClass:"search-options"},[n("span",{staticClass:"status"},[t._v(" 任务状态： "),n("el-select",{attrs:{placeholder:"请选择"},model:{value:t.authStatus.value,callback:function(e){t.$set(t.authStatus,"value",e)},expression:"authStatus.value"}},t._l(t.authStatus.options,(function(t){return n("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),n("span",{staticClass:"company"},[t._v(" 合作方： "),n("el-select",{attrs:{placeholder:"请选择"},model:{value:t.authCompany.value,callback:function(e){t.$set(t.authCompany,"value",e)},expression:"authCompany.value"}},t._l(t.authCompany.options,(function(t){return n("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),n("span",[n("el-button",{staticClass:"short-button",on:{click:function(e){return t.getTaskList()}}},[t._v("查询")]),n("el-button",{staticClass:"normal-button short-button",on:{click:function(e){return t.reset()}}},[t._v("重置")])],1),n("span",{staticClass:"handler"},[n("el-dropdown",{attrs:{placement:"bottom"},on:{command:t.auth}},[n("el-button",{staticClass:"normal-button long-button"},[t._v(" 批量操作 "),n("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),n("el-dropdown-menu",{staticClass:"handler-button",attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",{attrs:{command:"accepted"}},[t._v("同意")]),n("el-dropdown-item",{attrs:{command:"rejected"}},[t._v("拒绝")])],1)],1),n("el-button",{staticClass:"long-button",on:{click:t.toStart}},[t._v("发起计算")])],1)]),n("el-table",{staticStyle:{width:"100%"},attrs:{"header-row-class-name":"table-header","row-class-name":"table-tr",data:t.tableData,border:"","cell-class-name":t.getClassName,height:"400"},on:{"selection-change":t.handleSelectionChange}},[n("el-table-column",{attrs:{align:"center",type:"selection",width:"55",selectable:t.isSelectable}}),t._l(t.columns,(function(t){return n("el-table-column",{key:t.id,attrs:{align:"center","show-overflow-tooltip":"",prop:t.id,label:t.name}})})),n("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return["waiting"===e.row.status?n("span",{staticClass:"identify-pass",class:{"identify-disable":!e.row.canOperate},on:{click:function(n){return t.handlerTask(e.row.taskId,"accepted")}}},[t._v("同意")]):t._e(),"waiting"===e.row.status?n("span",{staticClass:"identify-pass",class:{"identify-disable":!e.row.canOperate},on:{click:function(n){return t.handlerTask(e.row.taskId,"rejected")}}},[t._v("拒绝")]):t._e(),n("span",{staticClass:"identify-pass",on:{click:function(n){return t.viewDetail(e.row)}}},[t._v("详情")])]}}])})],2),n("div",{staticClass:"identity-pagination"},[n("span",[t._v("共"+t._s(t.total)+"条记录")]),n("span",{staticClass:"right-part"},[n("span",{staticStyle:{"margin-right":"10px"}},[t._v("共"+t._s(t.totalPage)+"页")]),n("el-select",{staticClass:"page-size-select",attrs:{placeholder:"请选择"},on:{change:t.handleSizeChange},model:{value:t.pageSizeList.value,callback:function(e){t.$set(t.pageSizeList,"value",e)},expression:"pageSizeList.value"}},t._l(t.pageSizeList.options,(function(t){return n("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1),n("el-pagination",{attrs:{"current-page":t.currentPage,"page-size":t.size,layout:"prev, pager, next",total:t.total},on:{"current-change":t.handleCurrentChange}})],1)])],1)},i=[],r=(n("fe59"),n("9302"),n("053b"),n("08ba"),{data:function(){return{currentPage:1,total:0,totalPage:0,tableData:[],multipleSelection:[],columns:[{id:"status_fmt",name:"认证状态"},{id:"taskId",name:"任务编号"},{id:"taskPort",name:"计算端口"},{id:"clientName",name:"发起方"},{id:"serverName",name:"合作方"},{id:"resultFile",name:"任务输出"}],pageSizeList:{value:30,options:[{value:10,label:"每页10条"},{value:30,label:"每页30条"},{value:50,label:"每页50条"}]},authStatus:{value:"",options:[{value:"waiting",label:"等待加入"},{value:"accepted",label:"计算中"},{value:"finished",label:"成功"},{value:"rejected",label:"已拒绝"}]},authCompany:{value:"",options:[]},rules:{ip:[{validator:this.Utils.checkIp.bind(this),trigger:["change","blur"]}],port:[{type:"number",message:"请输入正确的端口"}]},form:{ip:"",port:""},size:30}},methods:{viewDetail:function(t){this.$router.push({name:"detail",params:{taskId:t.taskId}})},toStart:function(){this.$router.push({path:"/task/start"})},getClassName:function(t){var e=t.row,n=(t.column,t.rowIndex,t.columnIndex);if(1===n)return"finished"===e.status?"status-finished":"accepted"===e.status?"status-accepted":"rejected"===e.status||"abort"===e.status?"status-rejected":"status-waiting"},reset:function(){this.authStatus.value="",this.authCompany.value="",this.getTaskList()},isSelectable:function(t,e){return!(!t.canOperate||"waiting"!==t.status)},auth:function(t){var e=[],n=!0;if(0!==this.multipleSelection.length){this.multipleSelection.forEach((function(t){e.push(t.taskId),t.canOperate||(n=!1)}));var a=e.join(",");n?this.handlerTask(a,t):this.Utils.message("无操作权限！","warning")}},handlerTask:function(t,e){var n=this,a="accepted"===e?"是否同意？":"是否拒绝？";this.$confirm(a,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",cancelButtonClass:"reject-button",customClass:"identity-message"}).then((function(){var a={taskId:t,status:e};n.ApiService.postComputeAudit(a).then((function(t){1!==t.code?(n.Utils.message(t.message,"success"),n.getTaskList()):n.Utils.message(t.message,"warning")}),(function(t){n.Utils.message(t.message,"warning")}))})).catch((function(){}))},handleSelectionChange:function(t){this.multipleSelection=t},handleSizeChange:function(t){this.size=t,this.getTaskList({status:this.authStatus.value,company:this.authCompany.value,page:this.currentPage-1,size:t})},handleCurrentChange:function(t){this.currentPage=t,this.getTaskList({status:this.authStatus.value,company:this.authCompany.value,page:this.currentPage-1,size:this.size})},getTaskList:function(t){var e=this,n=t||{status:this.authStatus.value,company:this.authCompany.value,page:this.currentPage-1,size:this.size};this.ApiService.getTaskList(n).then((function(t){t.data.content.forEach((function(t){t.resultFile=t.resultFile||"--",t.taskPort=t.taskPort||"--","waiting"===t.status&&(t.status_fmt="等待加入"),"accepted"===t.status&&(t.status_fmt="计算中"),"finished"===t.status&&(t.status_fmt="成功"),"rejected"===t.status&&(t.status_fmt="已拒绝"),"abort"===t.status&&(t.status_fmt="异常"),t.createTime_fmt=e.moment(t.createTime).format("YYYY-MM-DD HH:mm:ss")})),e.tableData=t.data.content,e.total=t.data.totalElements,e.totalPage=t.data.totalPages}),(function(t){e.Utils.message("warning",t.message)}))},identify:function(){var t=this;this.$refs.form.validate((function(e){if(!e)return!1;t.ApiService.postAuthStart({authIp:t.form.ip,authPort:t.form.port}).then((function(e){1!==e.code?(t.getTaskList(),t.Utils.message("操作成功！","success"),t.$refs.form.resetFields()):t.Utils.message(e.message,"warning")}),(function(e){t.Utils.message(e.message,"warning")}))}))},getCompanyList:function(){var t=this;this.ApiService.getCompanyList().then((function(e){e.data.forEach((function(e){t.authCompany.options.push({value:e.authId,label:e.name})}))}))}},mounted:function(){this.getCompanyList(),this.getTaskList()}}),s=r,o=(n("27e4"),n("dd46"),n("9ca4")),l=Object(o["a"])(s,a,i,!1,null,"29b3ee6a",null);e["default"]=l.exports},d782:function(t,e,n){},dbb3:function(t,e,n){"use strict";var a=n("1c8b"),i=n("5dfd").filter,r=n("1ea7"),s=n("ff9c"),o=r("filter"),l=s("filter");a({target:"Array",proto:!0,forced:!o||!l},{filter:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}})},dd46:function(t,e,n){"use strict";var a=n("d782"),i=n.n(a);i.a},e0bf:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"start-compute bgfff"},[n("h2",{staticClass:"title"},[n("i",{staticClass:"el-icon-arrow-left",on:{click:function(e){return t.$router.go(-1)}}}),t._v(" 发起计算 ")]),n("div",{staticClass:"start-compute-content"},[n("div",[t._v(" 计算合作方： "),n("el-select",{staticClass:"company-select",attrs:{placeholder:"请选择"},on:{change:t.changeCompany},model:{value:t.companyList.value,callback:function(e){t.$set(t.companyList,"value",e)},expression:"companyList.value"}},t._l(t.companyList.options,(function(t){return n("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),n("div",[t._v(" 计算合作方匹配项： "),t.loading?n("span",[n("i",{staticClass:"el-icon-loading"})]):n("span",{staticClass:"lable-item"},t._l(t.labels,(function(e){return n("el-radio",{key:e,attrs:{label:e},model:{value:t.radio,callback:function(e){t.radio=e},expression:"radio"}},[n("a",{staticClass:"overflow-hidden",attrs:{title:e}},[t._v(t._s(e))])])})),1)]),n("div",[t._v(" 计算合作方标签项： "),t.loading?n("span",[n("i",{staticClass:"el-icon-loading"})]):n("span",{staticClass:"lable-item"},[n("el-checkbox-group",{model:{value:t.checked,callback:function(e){t.checked=e},expression:"checked"}},t._l(t.labels,(function(e){return n("el-checkbox",{key:e,attrs:{label:e}},[n("a",{staticClass:"overflow-hidden",attrs:{title:e}},[t._v(t._s(e))])])})),1)],1)]),n("div",[t._v(" 计算数据选择： "),n("div",[n("el-radio",{attrs:{label:"text"},model:{value:t.computeData,callback:function(e){t.computeData=e},expression:"computeData"}},[t._v("读取文本文件：")]),n("el-select",{attrs:{placeholder:"请选择"},model:{value:t.inputList.textValue,callback:function(e){t.$set(t.inputList,"textValue",e)},expression:"inputList.textValue"}},t._l(t.inputList.options,(function(t){return n("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),n("div",[n("el-radio",{attrs:{label:"history"},model:{value:t.computeData,callback:function(e){t.computeData=e},expression:"computeData"}},[t._v("读取数据库记录：")]),n("el-select",{attrs:{placeholder:"请选择"},model:{value:t.inputList.dataBaseValue,callback:function(e){t.$set(t.inputList,"dataBaseValue",e)},expression:"inputList.dataBaseValue"}},t._l(t.inputList.inputDb,(function(t){return n("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1)])]),n("div",{staticClass:"start-compute-footor"},[n("el-button",{staticClass:"normal-button",on:{click:function(e){return t.$router.go(-1)}}},[t._v("取消")]),n("el-button",{on:{click:t.postComputed}},[t._v("发起任务")])],1)])},i=[];n("b4fb"),n("dbb3"),n("fe59"),n("9302"),n("053b"),n("e35a"),n("0d7a"),n("08ba");function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function s(t){if(Array.isArray(t))return r(t)}n("f3dd"),n("0a51"),n("9b11"),n("98e0"),n("e18c"),n("96db"),n("af86");function o(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}n("77ad"),n("1c2e");function l(t,e){if(t){if("string"===typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}}function c(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function u(t){return s(t)||o(t)||l(t)||c()}n("6a61");function f(t,e,n,a,i,r,s){try{var o=t[r](s),l=o.value}catch(c){return void n(c)}o.done?e(l):Promise.resolve(l).then(a,i)}function p(t){return function(){var e=this,n=arguments;return new Promise((function(a,i){var r=t.apply(e,n);function s(t){f(r,a,i,s,o,"next",t)}function o(t){f(r,a,i,s,o,"throw",t)}s(void 0)}))}}var d={data:function(){return{radio:"",checked:[],computeData:"text",loading:!0,companyList:{value:"",options:[]},inputList:{dataBaseValue:"",textValue:"",options:[],inputDb:[]},labels:[]}},methods:{changeCompany:function(){this.postAuthLabel()},getCompanyList:function(){var t=this;return p(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.loading=!0,e.next=3,t.ApiService.getCompanyList({status:"accepted"}).then((function(e){e.data.forEach((function(e){t.companyList.options.push({value:e.authId,label:e.name})})),t.companyList.value=e.data[0]&&e.data[0].authId,t.loading=!1}));case 3:t.postAuthLabel();case 4:case"end":return e.stop()}}),e)})))()},postAuthLabel:function(){var t=this,e={authId:this.companyList.value};this.ApiService.postAuthLabel(e).then((function(e){t.labels=e.data.split(",")}))},postComputed:function(){var t=this,e={authId:this.companyList.value,dataSourceId:"text"===this.computeData?this.inputList.textValue:this.inputList.dataBaseValue,selectedLabels:[this.radio].concat(u(this.checked.filter((function(e){return t.radio!==e})))).join(",")};e.dataSourceId?e.selectedLabels?this.ApiService.startComputed(e).then((function(e){0===e.code?(t.Utils.message("操作成功！","success"),t.$router.go(-1)):t.Utils.message(e.message,"warning")})):this.Utils.message("请选择标签项获匹配项！","warning"):this.Utils.message("请选择数据源！","warning")},getConfig:function(){var t=this;this.ApiService.getConfig().then((function(e){var n=e.data.inputConfig;n.inputFile&&t.inputList.options.push({value:n.inputFile.id,label:n.inputFile.tableName}),n.inputDb&&t.inputList.inputDb.push({value:n.inputDb.id,label:n.inputDb.tableName})}))}},mounted:function(){this.getCompanyList(),this.getConfig()}},h=d,m=(n("7541"),n("9ca4")),v=Object(m["a"])(h,a,i,!1,null,"67018d1f",null);e["default"]=v.exports},f3dd:function(t,e,n){"use strict";var a=n("1c8b"),i=n("d890"),r=n("6d7a"),s=n("9b9d"),o=n("1e2c"),l=n("c54b"),c=n("74cb"),u=n("efe2"),f=n("faa8"),p=n("74e7"),d=n("a719"),h=n("857c"),m=n("3553"),v=n("da10"),g=n("9f67"),b=n("38b9"),y=n("6d60"),w=n("cbab"),_=n("b338"),C=n("c051"),S=n("0a60"),k=n("aa6b"),x=n("d910"),L=n("ef71"),T=n("0fc1"),E=n("1944"),D=n("6d28"),O=n("7db2"),j=n("d5a8"),Y=n("7e8b"),M=n("90fb"),N=n("4350"),I=n("6d51"),P=n("27b5"),A=n("b702"),$=n("5dfd").forEach,F=O("hidden"),H="Symbol",z="prototype",U=M("toPrimitive"),R=A.set,V=A.getterFor(H),B=Object[z],G=i.Symbol,J=r("JSON","stringify"),Q=k.f,W=x.f,q=C.f,K=L.f,X=D("symbols"),Z=D("op-symbols"),tt=D("string-to-symbol-registry"),et=D("symbol-to-string-registry"),nt=D("wks"),at=i.QObject,it=!at||!at[z]||!at[z].findChild,rt=o&&u((function(){return 7!=y(W({},"a",{get:function(){return W(this,"a",{value:7}).a}})).a}))?function(t,e,n){var a=Q(B,e);a&&delete B[e],W(t,e,n),a&&t!==B&&W(B,e,a)}:W,st=function(t,e){var n=X[t]=y(G[z]);return R(n,{type:H,tag:t,description:e}),o||(n.description=e),n},ot=c?function(t){return"symbol"==typeof t}:function(t){return Object(t)instanceof G},lt=function(t,e,n){t===B&&lt(Z,e,n),h(t);var a=g(e,!0);return h(n),f(X,a)?(n.enumerable?(f(t,F)&&t[F][a]&&(t[F][a]=!1),n=y(n,{enumerable:b(0,!1)})):(f(t,F)||W(t,F,b(1,{})),t[F][a]=!0),rt(t,a,n)):W(t,a,n)},ct=function(t,e){h(t);var n=v(e),a=w(n).concat(ht(n));return $(a,(function(e){o&&!ft.call(n,e)||lt(t,e,n[e])})),t},ut=function(t,e){return void 0===e?y(t):ct(y(t),e)},ft=function(t){var e=g(t,!0),n=K.call(this,e);return!(this===B&&f(X,e)&&!f(Z,e))&&(!(n||!f(this,e)||!f(X,e)||f(this,F)&&this[F][e])||n)},pt=function(t,e){var n=v(t),a=g(e,!0);if(n!==B||!f(X,a)||f(Z,a)){var i=Q(n,a);return!i||!f(X,a)||f(n,F)&&n[F][a]||(i.enumerable=!0),i}},dt=function(t){var e=q(v(t)),n=[];return $(e,(function(t){f(X,t)||f(j,t)||n.push(t)})),n},ht=function(t){var e=t===B,n=q(e?Z:v(t)),a=[];return $(n,(function(t){!f(X,t)||e&&!f(B,t)||a.push(X[t])})),a};if(l||(G=function(){if(this instanceof G)throw TypeError("Symbol is not a constructor");var t=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,e=Y(t),n=function(t){this===B&&n.call(Z,t),f(this,F)&&f(this[F],e)&&(this[F][e]=!1),rt(this,e,b(1,t))};return o&&it&&rt(B,e,{configurable:!0,set:n}),st(e,t)},E(G[z],"toString",(function(){return V(this).tag})),E(G,"withoutSetter",(function(t){return st(Y(t),t)})),L.f=ft,x.f=lt,k.f=pt,_.f=C.f=dt,S.f=ht,N.f=function(t){return st(M(t),t)},o&&(W(G[z],"description",{configurable:!0,get:function(){return V(this).description}}),s||E(B,"propertyIsEnumerable",ft,{unsafe:!0}))),a({global:!0,wrap:!0,forced:!l,sham:!l},{Symbol:G}),$(w(nt),(function(t){I(t)})),a({target:H,stat:!0,forced:!l},{for:function(t){var e=String(t);if(f(tt,e))return tt[e];var n=G(e);return tt[e]=n,et[n]=e,n},keyFor:function(t){if(!ot(t))throw TypeError(t+" is not a symbol");if(f(et,t))return et[t]},useSetter:function(){it=!0},useSimple:function(){it=!1}}),a({target:"Object",stat:!0,forced:!l,sham:!o},{create:ut,defineProperty:lt,defineProperties:ct,getOwnPropertyDescriptor:pt}),a({target:"Object",stat:!0,forced:!l},{getOwnPropertyNames:dt,getOwnPropertySymbols:ht}),a({target:"Object",stat:!0,forced:u((function(){S.f(1)}))},{getOwnPropertySymbols:function(t){return S.f(m(t))}}),J){var mt=!l||u((function(){var t=G();return"[null]"!=J([t])||"{}"!=J({a:t})||"{}"!=J(Object(t))}));a({target:"JSON",stat:!0,forced:mt},{stringify:function(t,e,n){var a,i=[t],r=1;while(arguments.length>r)i.push(arguments[r++]);if(a=e,(d(e)||void 0!==t)&&!ot(t))return p(e)||(e=function(t,e){if("function"==typeof a&&(e=a.call(this,t,e)),!ot(e))return e}),i[1]=e,J.apply(null,i)}})}G[z][U]||T(G[z],U,G[z].valueOf),P(G,H),j[F]=!0},ffa4:function(t,e,n){}}]);
//# sourceMappingURL=task.75fa5076.js.map